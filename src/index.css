@import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* MacOS-inspired variables - Dark mode */
    --background-dark: #202020;
    --background-card: #282828;
    --background-glass: rgba(38, 38, 38, 0.85);
    --background-glass-rgb: 38, 38, 38;
    --background-elevated: #323232;
    --text-primary: #ffffff;
    --text-secondary: #9e9e9e;
    --text-secondary-rgb: 158, 158, 158;
    --border-subtle: rgba(54, 54, 54, 0.7);
    --glass-gradient: linear-gradient(
      180deg,
      rgba(253, 253, 253, 0.015) 0%,
      rgba(253, 253, 253, 0.05) 100%
    );
    --glass-shadow: 0px 16px 24px -13px rgba(0, 0, 0, 0.5),
      0px 2.15px 0.5px -2px rgba(0, 0, 0, 0.25),
      0px 5px 1.5px -4px rgba(8, 8, 8, 0.2),
      0px 6px 4px -4px rgba(8, 8, 8, 0.16), 0px 6px 13px rgba(8, 8, 8, 0.12),
      0px 24px 24px -16px rgba(8, 8, 8, 0.08),
      inset 2px 4px 16px rgba(253, 253, 253, 0.05);
    --glass-blur: 16px;
    --card-shadow: 0px 16px 24px -8px rgba(0, 0, 0, 0.2),
      0px 8px 32px -16px rgba(0, 0, 0, 0.1);
    --accent-blue: #0a84ff;
    --accent-purple: #bf5af2;
    --accent-green: #30d158;
    --accent-orange: #ff9f0a;
    --accent-red: #ff453a;
    --sidebar-width: 240px;
    --header-height: 48px;
    --border-radius-sm: 6px;
    --border-radius-md: 16px;
    --border-radius-lg: 20px;
    --border-radius-xl: 28px;
    --border-radius-xxl: 32px;
  }

  /* MacOS-inspired Light mode variables */
  .light-mode {
    --background-dark: #e9e9e9;
    --background-card: #f1f1f1;
    --background-glass: rgba(255, 255, 255, 0.85);
    --background-glass-rgb: 255, 255, 255;
    --background-elevated: #f9f9f9;
    --text-primary: #000000;
    --text-secondary: #727272;
    --text-secondary-rgb: 114, 114, 114;
    --border-subtle: rgba(168, 168, 168, 0.2);
    --glass-gradient: linear-gradient(
      180deg,
      rgba(253, 253, 253, 0.225) 0%,
      rgba(253, 253, 253, 0.75) 100%
    );
    --glass-shadow: 0px 32px 64px -12px rgba(0, 0, 0, 0.075),
      0px 2.15px 0.5px -2px rgba(0, 0, 0, 0.25),
      0px 24px 24px -16px rgba(8, 8, 8, 0.04), 0px 6px 13px rgba(8, 8, 8, 0.03),
      0px 6px 4px -4px rgba(8, 8, 8, 0.05),
      0px 5px 1.5px -4px rgba(8, 8, 8, 0.05);
    --glass-blur: 16px;
    --card-shadow: 0px 16px 24px -8px rgba(0, 0, 0, 0.2),
      0px 8px 32px -16px rgba(0, 0, 0, 0.1);
    --accent-blue: #007aff;
    --accent-purple: #af52de;
    --accent-green: #34c759;
    --accent-orange: #ff9500;
    --accent-red: #ff3b30;
  }

  /* Styles for native-like scrollbars */
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--text-secondary) transparent;
  }

  /* Setup base font sizes that match macOS */
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif;
    font-size: 13px;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background: #171717;
  }

  /* Adding fonts that match Apple's system font styles */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif;
    font-weight: 500;
  }

  /* Remove focus outlines for mouse users, keep for keyboard navigation */
  *:focus:not(:focus-visible) {
    outline: none;
  }

  *:focus-visible {
    outline: 2px solid var(--accent-blue);
    outline-offset: 2px;
  }

  /* Number input styling */
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  /* Transition for interactive elements */
  a,
  input,
  button {
    transition: 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
  }

  /* Focus styles */
  a:focus,
  input:focus[type="text"],
  input:focus[type="number"],
  textarea:focus,
  button:focus,
  select:focus {
    box-shadow:
      0px 1px 1px 0px rgba(0, 0, 0, 0.03),
      0px 0px 2px 0px rgba(0, 0, 0, 0.1),
      0px 5px 5px 0px rgba(0, 0, 0, 0.03);
    border-color: rgba(0, 0, 0, 0.5);
    outline: 1px solid rgba(0, 0, 0, 0.1);
  }

  @media (prefers-color-scheme: dark) {
    a:focus,
    input:focus[type="text"],
    input:focus[type="number"],
    textarea:focus,
    button:focus,
    select:focus {
      box-shadow:
        0px 0px 0px 0px rgba(255, 255, 255, 0.5),
        0px 0px 10px 0px rgba(255, 255, 255, 0.3),
        0px 0px 10px 0px rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.5) !important;
      outline: 1px solid rgba(255, 255, 255, 0.1);
    }
  }

  .dark:focus {
    box-shadow:
      0px 0px 0px 0px rgba(255, 255, 255, 0.5),
      0px 0px 10px 0px rgba(255, 255, 255, 0.3),
      0px 0px 10px 0px rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5) !important;
    outline: 1px solid rgba(255, 255, 255, 0.1);
  }

  .dark-strong:focus {
    box-shadow:
      0px 0px 0px 0px rgba(255, 255, 255, 0.8),
      0px 0px 10px 0px rgba(255, 255, 255, 0.3),
      0px 0px 10px 0px rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.8) !important;
    outline: 1px solid rgba(255, 255, 255, 0.3);
  }

  input:focus[type="range"],
  .nofocus:focus {
    box-shadow: none !important;
    border: none !important;
    outline: none !important;
  }
}

@layer components {
  .font-space-grotesk {
    font-family: "Space Grotesk", sans-serif;
  }

  .glass-card {
    @apply relative bg-background-card rounded-[var(--border-radius-xl)] border border-[var(--border-subtle)]
           shadow-[var(--glass-shadow)] backdrop-blur-[var(--glass-blur)] overflow-hidden;
  }

  .glass-button {
    position: relative;
    overflow: hidden;
    border-radius: var(--border-radius-lg);
    border: 1.5px solid var(--border-subtle);
    background: linear-gradient(
      180deg,
      rgba(235, 235, 235, 0.1) -27.27%,
      rgba(196, 196, 196, 0.15) 127.27%
    );
    box-shadow: var(--glass-shadow);
    transition: all 300ms ease-out;
  }

  .glass-button:hover {
    background-color: rgba(var(--background-glass-rgb), 0.8);
    border-color: var(--border-subtle);
  }

  .glass-button:active {
    transform: scale(0.98);
    transition: transform 100ms;
  }

  .status-badge {
    @apply px-3 py-1.5 rounded-md text-[10px] font-medium font-mono leading-none;
  }

  .status-badge-blue {
    background-color: rgba(45, 104, 255, 0.1);
    color: #2d68ff;
    border: 1px solid rgba(45, 104, 255, 0.2);
    @apply rounded-md text-[10px] font-medium font-mono leading-none px-3 py-1.5;
  }

  .status-badge-green {
    background-color: var(--background-card);
    color: #00a656;
    border: 1px solid rgba(0, 166, 86, 0.15);
    @apply rounded-md text-[10px] font-medium font-mono leading-none px-3 py-1.5;
  }

  .glass-input {
    @apply bg-[var(--background-glass)] rounded-[12px] px-4 py-2 text-[12px] text-text-primary
           placeholder-text-secondary border border-[var(--border-subtle)]
           focus:outline-none focus:border-transparent
           transition-all duration-200;
  }

  .glass-input:focus {
    box-shadow: 0 0 0 2px rgba(45, 104, 255, 0.5);
  }

  .glass-panel {
    @apply relative bg-background-card 
           rounded-[var(--border-radius-lg)] overflow-hidden backdrop-blur-[var(--glass-blur)]
           shadow-[var(--glass-shadow)];
  }

  /* Can't use CSS variables with arbitrary values in gradient */
  .glass-panel::before {
    content: "";
    position: absolute;
    inset: 0;
    background: var(--glass-gradient);
    border-radius: var(--border-radius-lg);
    z-index: -1;
  }

  .glass-header {
    position: absolute;
    inset-inline: 0;
    top: 0;
    height: 36px;
    background-color: rgba(253, 253, 253, 0.025);
    border-bottom: 1px solid var(--border-subtle);
    border-top-left-radius: var(--border-radius-lg);
    border-top-right-radius: var(--border-radius-lg);
  }

  .glass-bubble {
    position: absolute;
    width: 0.375rem;
    height: 0.375rem;
    border-radius: 9999px;
    background-image: linear-gradient(to bottom right, #454545, #1a1a1a);
    opacity: 0.5;
  }

  .glass-text {
    @apply font-['Rubik'] text-[12px] leading-none tracking-[-0.02em] text-text-primary;
  }

  .glass-text-mono {
    font-family: "JetBrains Mono", monospace;
    font-style: normal;
    font-weight: 500;
    font-size: 8px;
    line-height: 10px;
    letter-spacing: -0.02em;
    color: var(--text-secondary);
  }

  .glow {
    box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.6);
  }

  .text-glow {
    text-shadow: 0px 0px 30px rgba(255, 255, 255, 0.2);
  }

  .shine {
    border-top: 0.5px solid rgba(255, 255, 255, 0.2);
    background-image: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.03),
      rgba(255, 255, 255, 0)
    );
  }

  .shine-large {
    border-top: 0.5px solid rgba(255, 255, 255, 0.3);
    background-image: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.1),
      rgba(255, 255, 255, 0)
    );
  }

  .noselect {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  .track {
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 0 10px rgba(255, 255, 255, 0.1);
    transition: 0.3s ease-out;
  }

  .track:hover {
    border: 1px solid rgba(255, 255, 255, 1);
    box-shadow:
      inset 0 0 5px rgba(255, 255, 255, 0.5),
      inset 0 0 10px rgba(255, 255, 255, 0.1);
    outline: none;
  }

  .selected {
    box-shadow:
      0px 0px 10px 0px rgba(255, 255, 255, 0.1),
      inset 0px 0px 5px 0px rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5) !important;
    outline: 0.5px solid rgba(255, 255, 255, 0.3);
  }

  .no-scroll {
    overflow: hidden;
  }

  .markdown-content {
    line-height: 1.6;
  }

  .markdown-content h1,
  .markdown-content h2,
  .markdown-content h3,
  .markdown-content h4,
  .markdown-content h5,
  .markdown-content h6 {
    margin-top: 0.5em;
    margin-bottom: 1em;
    font-weight: bold;
  }

  .markdown-content h1 {
    font-size: 1.5em;
  }
  .markdown-content h2 {
    font-size: 1.2em;
  }
  .markdown-content h3 {
    font-size: 1.1em;
  }
  .markdown-content h4 {
    font-size: 1em;
  }
  .markdown-content h5 {
    font-size: 0.83em;
  }
  .markdown-content h6 {
    font-size: 0.67em;
  }

  .markdown-content hr {
    background: rgba(255, 255, 255, 0.05);
    border: none;
    height: 1px;
    margin: 1.5em 0;
  }

  .markdown-content p {
    margin-bottom: 2em;
  }

  .markdown-content ul,
  .markdown-content ol {
    margin-bottom: 2em;
    padding-left: 1.5em;
  }

  .markdown-content ul {
    list-style-type: disc;
  }
  .markdown-content ol {
    list-style-type: decimal;
  }
  .markdown-content ul ul,
  .markdown-content ol ul {
    list-style-type: circle;
  }
  .markdown-content ul ul ul,
  .markdown-content ol ul ul,
  .markdown-content ol ol ul {
    list-style-type: square;
  }

  .markdown-content li {
    margin-bottom: 0.5em;
  }

  .markdown-content li > p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }

  .markdown-content li > ul,
  .markdown-content li > ol {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }

  .markdown-content a {
    color: #3b82f6;
    text-decoration: underline;
  }

  .markdown-content blockquote {
    border-left: 4px solid #e5e7eb;
    padding-left: 1em;
    margin-left: 0;
    margin-right: 0;
    font-style: italic;
  }

  .markdown-content code {
    font-size: 0.9em;
  }

  .markdown-chat p:last-child,
  .markdown-chat ul:last-child,
  .markdown-chat ol:last-child {
    margin-bottom: 0em;
  }

  .shadow {
    box-shadow:
      0px 1px 0px 0px rgba(0, 0, 0, 0.05),
      0px 4px 4px 0px rgba(0, 0, 0, 0.05),
      0px 10px 10px 0px rgba(0, 0, 0, 0.1);
  }

  .shadow-subtle {
    box-shadow:
      0px 1px 1px 0px rgba(0, 0, 0, 0.03),
      0px 0px 2px 0px rgba(0, 0, 0, 0.1),
      0px 5px 5px 0px rgba(0, 0, 0, 0.03);
  }

  .shadow-strong {
    box-shadow:
      0px 1px 0px 0px rgba(0, 0, 0, 0.05),
      0px 4px 4px 0px rgba(0, 0, 0, 0.1),
      0px 10px 10px 0px rgba(0, 0, 0, 0.15),
      inset 0px -1px 0px 0px rgba(0, 0, 0, 0.1);
  }

  .shadow-large {
    box-shadow:
      0px 5px 10px 0px rgba(0, 0, 0, 0.05),
      0px 15px 30px 0px rgba(0, 0, 0, 0.15),
      0px 20px 40px 0px rgba(0, 0, 0, 0.25),
      inset 0px -1px 0px 0px rgba(0, 0, 0, 0.1);
  }

  .shadow-large-strong {
    box-shadow:
      0px 5px 10px 0px rgba(0, 0, 0, 0.2),
      0px 15px 30px 0px rgba(0, 0, 0, 0.3),
      0px 20px 40px 0px rgba(0, 0, 0, 0.5),
      inset 0px -1px 0px 0px rgba(0, 0, 0, 0.2);
  }

  /* Selectable text */
  .selectable-text {
    user-select: text !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    cursor: text;
  }

  .selectable-text * {
    user-select: text !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
  }

  .selectable-text p,
  .selectable-text span,
  .selectable-text div {
    user-select: text !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
  }

  /* Toggle switch */
  .toggle-switch {
    position: relative;
    display: inline-block;
    width: 48px;
    height: 28px;
  }

  .toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }

  .toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #3a3a3c;
    transition: 0.4s;
    border-radius: 34px;
  }

  .toggle-slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 4px;
    bottom: 4px;
    background-color: #636366;
    transition: 0.4s;
    border-radius: 50%;
    box-shadow:
      0px 0px 0px 1px rgba(0, 0, 0, 0.05),
      0px 1px 0px 0px rgba(0, 0, 0, 0.05),
      0px 4px 4px 0px rgba(0, 0, 0, 0.05),
      0px 10px 10px 0px rgba(0, 0, 0, 0.1);
  }

  input:checked + .toggle-slider {
    background-color: #6057e8;
  }

  input:checked + .toggle-slider:before {
    transform: translateX(20px);
    background-color: #ffffff;
  }

  input:focus + .toggle-slider {
    box-shadow: 0 0 1px #6057e8;
  }

  /* Custom range input */
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    background: transparent;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #636366;
    box-shadow:
      0px 0px 0px 1px rgba(0, 0, 0, 0.05),
      0px 1px 0px 0px rgba(0, 0, 0, 0.05),
      0px 4px 4px 0px rgba(0, 0, 0, 0.05),
      0px 10px 10px 0px rgba(0, 0, 0, 0.1);
    margin-top: -8px;
    cursor: pointer;
    transition: 0.3s ease-out;
  }

  input[type="range"]::-moz-range-thumb {
    appearance: none;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #636366;
    box-shadow:
      0px 0px 0px 1px rgba(0, 0, 0, 0.05),
      0px 1px 0px 0px rgba(0, 0, 0, 0.05),
      0px 4px 4px 0px rgba(0, 0, 0, 0.05),
      0px 10px 10px 0px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: 0.3s ease-out;
  }

  input[type="range"]::-webkit-slider-runnable-track {
    width: 100%;
    height: 4px;
    background: #3a3a3c;
    border-radius: 2px;
  }

  input[type="range"]::-moz-range-track {
    width: 100%;
    height: 4px;
    background: #3a3a3c;
    border-radius: 2px;
  }

  input[type="range"]:focus {
    outline: none;
  }

  input[type="range"]:focus::-webkit-slider-thumb {
    background: #fff;
    box-shadow:
      0px 1px 0px 0px rgba(0, 0, 0, 0.05),
      0px 4px 4px 0px rgba(0, 0, 0, 0.05),
      0px 10px 10px 0px rgba(0, 0, 0, 0.1);
  }

  input[type="range"]:focus::-moz-range-thumb {
    background: #fff;
    box-shadow:
      0px 1px 0px 0px rgba(0, 0, 0, 0.05),
      0px 4px 4px 0px rgba(0, 0, 0, 0.05),
      0px 10px 10px 0px rgba(0, 0, 0, 0.1);
  }

  /* Hide scrollbar but allow scrolling */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  @keyframes tooltip-fade {
    from {
      opacity: 0;
      transform: scale(0.95)
        translate(var(--tw-translate-x), var(--tw-translate-y));
    }
    to {
      opacity: 1;
      transform: scale(1)
        translate(var(--tw-translate-x), var(--tw-translate-y));
    }
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slideOutRight {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(100%);
    }
  }

  @keyframes fadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  .glass-divider {
    @apply w-full h-px;
    background: linear-gradient(
      to right,
      transparent,
      rgba(var(--text-secondary-rgb), 0.1),
      transparent
    );
  }

  .glass-activity-item {
    @apply flex items-center gap-3 px-4 py-3 transition-colors;
  }

  .glass-activity-item:hover {
    background-color: rgba(var(--background-glass-rgb), 0.1);
  }

  .glass-icon {
    @apply w-4 h-4 text-text-secondary;
  }

  .glass-progress-bar {
    @apply relative h-1 rounded-full overflow-hidden;
    background-color: rgba(45, 104, 255, 0.1);
  }

  .glass-progress-fill {
    @apply absolute inset-y-0 left-0 rounded-full transition-all duration-500;
    background-color: #2d68ff;
  }

  /* Add keyboard shortcut display */
  .keyboard-shortcut {
    @apply inline-flex items-center text-xs text-text-secondary ml-2;
  }

  .keyboard-shortcut kbd {
    @apply px-1.5 py-0.5 rounded border border-[var(--border-subtle)] font-mono;
    background-color: rgba(var(--background-glass-rgb), 0.5);
  }

  /* Add drag handles */
  .drag-handle {
    @apply cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-60;
  }

  /* Scrollbar styling */
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-2;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply rounded-full;
    background-color: rgba(var(--text-secondary-rgb, 158, 158, 158), 0.2);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: rgba(var(--text-secondary-rgb, 158, 158, 158), 0.3);
  }

  /* Sticky headers for sections */
  .sticky-header {
    @apply sticky top-0 z-10 py-2 bg-background-card backdrop-blur-md;
  }
}
